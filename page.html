<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Snake</title>
<style>
  body{margin:0;display:flex;justify-content:center;align-items:center;height:100vh;background:#000}
</style>
</head>
<body>
<canvas id="game" width="400" height="400"></canvas>
<script>
const canvas=document.getElementById('game')
const ctx=canvas.getContext('2d')
const rows=20,cols=20,size=20
let snake,food,dx,dy,hueOffset,loop
function init(){
  snake=[{x:10,y:10}]
  dx=1;dy=0
  hueOffset=0
  placeFood()
}
function placeFood(){
  food={x:Math.floor(Math.random()*cols),y:Math.floor(Math.random()*rows)}
}
document.addEventListener('keydown',e=>{
  if(e.key==='ArrowUp'&&dy===0){dx=0;dy=-1}
  if(e.key==='ArrowDown'&&dy===0){dx=0;dy=1}
  if(e.key==='ArrowLeft'&&dx===0){dx=-1;dy=0}
  if(e.key==='ArrowRight'&&dx===0){dx=1;dy=0}
})
function game(){
  const head={x:snake[0].x+dx,y:snake[0].y+dy}
  if(head.x<0||head.x>=cols||head.y<0||head.y>=rows||snake.some(s=>s.x===head.x&&s.y===head.y)){
    init()
    return
  }
  snake.unshift(head)
  if(head.x===food.x&&head.y===food.y) placeFood()
  else snake.pop()
  ctx.fillStyle='#000'
  ctx.fillRect(0,0,canvas.width,canvas.height)
  hueOffset=(hueOffset+5)%360
  snake.forEach((s,i)=>{
    ctx.fillStyle=`hsl(${(hueOffset+i*20)%360},100%,50%)`
    ctx.fillRect(s.x*size,s.y*size,size,size)
  })
  ctx.fillStyle='#fff'
  ctx.fillRect(food.x*size,food.y*size,size,size)
}
init()
loop=setInterval(game,100)
</script>
</body>
</html>